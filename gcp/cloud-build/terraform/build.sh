#!/bin/sh

PROJECT_ID="$(gcloud config get-value core/project)"
CLOUDSDK_VERSION="256.0.0"
CLOUDSDK_SHA256SUM="7237fc06ca1c0a1263bb107638e72f69539056ff7455983827cf2908dd09ed2d"
TERRAFORM_VERSION="0.12.5"
TERRAFORM_SHA256SUM="babb4a30b399fb6fc87a6aa7435371721310c2e2102a95a763ef2c979ab06ce2"
TERRAFORM_GOOGLE_PROVIDER_VERSION="2.11.0"
TERRAFORM_GOOGLE_PROVIDER_SHA256SUM="e21e31cc239d2452c87d5fdcaba534185c4be1dd3cc2a54ddd85fee15da85a2a"
TERRAFORM_GOOGLE_BETA_PROVIDER_VERSION="2.11.0"
TERRAFORM_GOOGLE_BETA_PROVIDER_SHA256SUM="2013c3ed906a1ecbe55ea40a0544457f5f8dc7c5da6e2f17c0a7343e2cddeee2"
TERRAFORM_GSUITE_PROVIDER_VERSION="0.1.22"
TERRAFORM_GSUITE_PROVIDER_SHA256SUM="2bebede2c2152050ebd2896e01411459005a2ccfbf75b4b2114b6ab08d49fd40"
TERRAFORM_EXTERNAL_PROVIDER_VERSION="1.2.0"
TERRAFORM_EXTERNAL_PROVIDER_SHA256SUM="fddff8f179925c1c76e58302ddcbead9474ea52c6e8141f5ba73bb137ca2ebc5"
TERRAFORM_RANDOM_PROVIDER_VERSION="2.1.2"
TERRAFORM_RANDOM_PROVIDER_SHA256SUM="cbfc6f63501a57ca891d29cfeac39a7dd5753ff24f89c5be5bb97d0bd3c84a98"
TERRAFORM_NULL_PROVIDER_VERSION="2.1.2"
TERRAFORM_NULL_PROVIDER_SHA256SUM="16fc2d9b10cf9e5123bf956e7032c338cc93a03be1ca2e9f3d3b7014c0e866c7"

gcloud builds submit \
    --config=cloudbuild.yaml \
    --substitutions=\
_CLOUDSDK_VERSION=${CLOUDSDK_VERSION},\
_CLOUDSDK_SHA256SUM=${CLOUDSDK_SHA256SUM},\
_TERRAFORM_VERSION=${TERRAFORM_VERSION},\
_TERRAFORM_SHA256SUM=${TERRAFORM_SHA256SUM},\
_TARGET_PROJECT=${PROJECT_ID},\
_TERRAFORM_GOOGLE_PROVIDER_VERSION=${TERRAFORM_GOOGLE_PROVIDER_VERSION},\
_TERRAFORM_GOOGLE_PROVIDER_SHA256SUM=${TERRAFORM_GOOGLE_PROVIDER_SHA256SUM},\
_TERRAFORM_GOOGLE_BETA_PROVIDER_VERSION=${TERRAFORM_GOOGLE_BETA_PROVIDER_VERSION},\
_TERRAFORM_GOOGLE_BETA_PROVIDER_SHA256SUM=${TERRAFORM_GOOGLE_BETA_PROVIDER_SHA256SUM},\
_TERRAFORM_GSUITE_PROVIDER_VERSION=${TERRAFORM_GSUITE_PROVIDER_VERSION},\
_TERRAFORM_GSUITE_PROVIDER_SHA256SUM=${TERRAFORM_GSUITE_PROVIDER_SHA256SUM},\
_TERRAFORM_EXTERNAL_PROVIDER_VERSION=${TERRAFORM_EXTERNAL_PROVIDER_VERSION},\
_TERRAFORM_EXTERNAL_PROVIDER_SHA256SUM=${TERRAFORM_EXTERNAL_PROVIDER_SHA256SUM},\
_TERRAFORM_RANDOM_PROVIDER_VERSION=${TERRAFORM_RANDOM_PROVIDER_VERSION},\
_TERRAFORM_RANDOM_PROVIDER_SHA256SUM=${TERRAFORM_RANDOM_PROVIDER_SHA256SUM},\
_TERRAFORM_NULL_PROVIDER_VERSION=${TERRAFORM_NULL_PROVIDER_VERSION},\
_TERRAFORM_NULL_PROVIDER_SHA256SUM=${TERRAFORM_NULL_PROVIDER_SHA256SUM}

