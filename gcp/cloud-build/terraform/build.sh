#!/bin/sh

PROJECT_ID=$(gcloud config get-value core/project)
CLOUDSDK_VERSION="243.0.0"
CLOUDSDK_SHA256SUM="d00d4c340e5e0179e9dbf9fa44c177289f209b81850ace189d706815dfbc3e37"
TERRAFORM_VERSION="0.11.13"
TERRAFORM_SHA256SUM="5925cd4d81e7d8f42a0054df2aafd66e2ab7408dbed2bd748f0022cfe592f8d2"
TERRAFORM_GOOGLE_PROVIDER_VERSION="2.5.1"
TERRAFORM_GOOGLE_PROVIDER_SHA256SUM="32df862689b919cc7183f77bfd7772301c17588fcd3c63f7257d4ce8d883bd33"
TERRAFORM_GOOGLE_BETA_PROVIDER_VERSION="2.5.1"
TERRAFORM_GOOGLE_BETA_PROVIDER_SHA256SUM="ed609d43b58e95b7f37433416ac13a1be49ad26dce33231a87bec62cd00ec85e"
TERRAFORM_GSUITE_PROVIDER_VERSION="0.1.19"
TERRAFORM_GSUITE_PROVIDER_SHA256SUM="fda6273f803c540ba8771534247db54817603b46784628e63eff1ce7890994e4"
TERRAFORM_EXTERNAL_PROVIDER_VERSION="1.1.1"
TERRAFORM_EXTERNAL_PROVIDER_SHA256SUM="2ee1c8d79db243ecf14ae05b113727b2427ac8ef11988ee2031d83ecda359d2d"
TERRAFORM_RANDOM_PROVIDER_VERSION="2.1.1"
TERRAFORM_RANDOM_PROVIDER_SHA256SUM="c31c9e0f6e669b6c442e0749498697fb3dd2a0a5472a6a4dfebe63a8f8fa872a"
TERRAFORM_NULL_PROVIDER_VERSION="2.1.1"
TERRAFORM_NULL_PROVIDER_SHA256SUM="5b29f6a87f4dae4dc295a43f499182221333dbe474fcf724b8ea98fd38cfb3e6"

gcloud builds submit \
    --config=cloudbuild.yaml \
    --substitutions=\
_CLOUDSDK_VERSION=${CLOUDSDK_VERSION},\
_CLOUDSDK_SHA256SUM=${CLOUDSDK_SHA256SUM},\
_TERRAFORM_VERSION=${TERRAFORM_VERSION},\
_TERRAFORM_SHA256SUM=${TERRAFORM_SHA256SUM},\
_TARGET_PROJECT=${PROJECT_ID},\
_TERRAFORM_GOOGLE_PROVIDER_VERSION=${TERRAFORM_GOOGLE_PROVIDER_VERSION},\
_TERRAFORM_GOOGLE_PROVIDER_SHA256SUM=${TERRAFORM_GOOGLE_PROVIDER_SHA256SUM},\
_TERRAFORM_GOOGLE_BETA_PROVIDER_VERSION=${TERRAFORM_GOOGLE_BETA_PROVIDER_VERSION},\
_TERRAFORM_GOOGLE_BETA_PROVIDER_SHA256SUM=${TERRAFORM_GOOGLE_BETA_PROVIDER_SHA256SUM},\
_TERRAFORM_GSUITE_PROVIDER_VERSION=${TERRAFORM_GSUITE_PROVIDER_VERSION},\
_TERRAFORM_GSUITE_PROVIDER_SHA256SUM=${TERRAFORM_GSUITE_PROVIDER_SHA256SUM},\
_TERRAFORM_EXTERNAL_PROVIDER_VERSION=${TERRAFORM_EXTERNAL_PROVIDER_VERSION},\
_TERRAFORM_EXTERNAL_PROVIDER_SHA256SUM=${TERRAFORM_EXTERNAL_PROVIDER_SHA256SUM},\
_TERRAFORM_RANDOM_PROVIDER_VERSION=${TERRAFORM_RANDOM_PROVIDER_VERSION},\
_TERRAFORM_RANDOM_PROVIDER_SHA256SUM=${TERRAFORM_RANDOM_PROVIDER_SHA256SUM},\
_TERRAFORM_NULL_PROVIDER_VERSION=${TERRAFORM_NULL_PROVIDER_VERSION},\
_TERRAFORM_NULL_PROVIDER_SHA256SUM=${TERRAFORM_NULL_PROVIDER_SHA256SUM}

